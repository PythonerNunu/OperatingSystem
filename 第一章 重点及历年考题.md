# 第一章 操作系统简介

## 考核内容

1.操作系统的作用

1.1操作系统是计算机用户与硬件的接口

1.2操作系统是计算机系统资源的管理者。

2.操作系统的发展。

2.1单道批处理系统及多道批处理系统的特点与缺点。

2.2分时系统的特点与有点

2.3实时系统的特点与应用领域

2.4主流操作系统及其应用领域。

2.5现代操作系统的特点：并发、共享、虚拟、一部的含义。

2.6操作系统的功能。

2.7了解单体结构模型、层次结构模型、微内核结构。

3.CPU的逻辑结构

3.2高级语言程序的机器级表示和指令的执行。

### 1.1 什么是操作系统？

概念： 操作系统是一种复杂的系统软件，是不同程序代码、数据结构、数据初始化文件的集合，可执行。
操作系统**提供计算机用户与计算机硬件之间的接口**，并**管理计算机软件和硬件资源**。

#### 1.1.1 用户与硬件之间的接口

接口分为硬件接口和软件接口

计算机所有功能都是有硬件的操作来实现的。

操作系统屏蔽了对硬件操作的细节，提供了计算机用户与计算机硬件之间的接口，并且通过这个接口使应用程序的开发变得简单、高效。

操作系统必须完成的两个主要目标如下：
① 与硬件部分相互作用，为包含在硬件平台上的所有底层可编程部件提供服务。
② 为运行在计算机系统上的应用程序提供执行环境。

#### 1.1.2 资源的管理者

现代计算机系统的一个重要特点是支持多任务。

操作系统所管理的资源主要包括处理机、内存、设备和文件。

操作系统的主要功能：处理机管理、内存管理、设备管理、文件管理。

### 1.2 操作系统的发展

操作系统的发展：
误操作系统 -> 单道批处理系统 -> 多道程序系统（多道批处理系统、分时系统）->
微机操作系统 -> 实时操作系统 -> 嵌入式操作系统 -> 物联网操作系统

#### 1.2.1 无操作系统

电子器件：电子管
存储：无
操作系统：无

需要人工干预
不能连续自动工作

#### 1.2.2 单道批处理系统

电子器件：晶体管
存储：磁性存储设备
操作系统：单道批处理系统

用户程序及程序处理的数据统称为作业。
内存只能留一道用户作业，CPU和内存被用户作业独占。
程序是指令的集合，程序的执行是CPU依次、逐条执行指令的过程。
缺点：CPU利用率低，损失系统的吞吐量

吞吐量：单位时间内内计算机系统处理的作业量

#### 1.2.3 多道程序系统

电子器件：集成电路芯片
操作系统：分时操作系统

为了提高CPU利用率
早期多道程序系统不具有交互功能，被称为多道批处理系统。
在分时操作系统的支持下，多个用户可以同时通过不同的终端使用主机，主机可以快速响应常用命令。
第一个通用分时系统CTSS是麻省理工学院于1962年在一台改装过的IBM7094上开发成功的。

#### 1.2.4 微机操作系统

第一个微机操作系统是INTEL公司的顾问GARY KILDALL编写的CP/M系统。
1985年微软开始构建WINDOWS操作系统。

#### 1.2.5 实时操作系统

实时操作系统是支持实时计算的系统。
广泛应用于自动控制、智能机器人、海底探测和航空航天等领域。
VXWORKS操作系统是美国WINDRIVER公司于1983年设计开发的一种嵌入式实时操作系统。

#### 1.2.6 批处理系统、分时系统、实时系统的特点

单道批处理系统的特点：

1. 自动性
2. 顺序性
3. 单道性

单道批处理系统的优缺点：
优点：与无操作系统相比，减少了等待人工操作的时间。
缺点：CPU资源不能得到充分利用。

-------------------------------

多道批处理系统的特点：

1. 多道性
2. 无序性
3. 调度行
4. 复杂性

多道批处理系统的优缺点：
优点：能够提高CPU、内存和I/O设备的利用率和系统的吞吐量。
缺点：系统平均周转时间长，缺乏交互能力。

-------------------------------

分时系统的特点：

1. 多路性
2. 独立性
3. 及时性
4. 交互性

分时系统的优缺点：
优点：向用户提供了人机交互的方便性，使多个用户可以通过不同的终端共享主机。
缺点：不能及时接收和及时处理用户的命令或数据。

-------------------------------

实时系统的特点：

1. 多路性
2. 独立性
3. 及时性
4. 交互性
5. 可靠性

实时系统的优点：比分时系统要求有更高的可靠性。

·实时系统中采取多级容错措施来保证系统安全和数据安全。

-------------------------------

批处理系统、分时系统和实时系统是三种基本的操作系统类型。

#### 1.2.7 操作系统产品现状

**主机操作系统**.

运行在大型主机上的操作系统，主要提供三类服务：批处理、事务处理和分时处理。

**服务器操作系统**.

运行在网络服务器上的操作系统，可以通过网络同时为众多用户服务，允许用户共享硬件和软件资源。

**微机操作系统**.

个人机操作系统

**嵌入式操作系统**.

宿主于非计算机设备中的计算机系统。

嵌入式操作系统的特征：小巧、实时性、可装卸、代码固化、弱交互性、强稳定性、接口统一、低能耗。

-------------------------------

### 1.3 操作系统的特征

现代操作系统都支持多任务，具有并发、共享、虚拟和异步性特征。

并发： 指两个或多个事件在同一时间间隔内发生。

共享： 指系统中的资源可供内存中多个并发执行的进程共同使用。

虚拟：指通过某种技术把一个物理实体变成若干逻辑上的对应物。

异步性：进程开始暂停结束不可预知。需要处理

-------------------------------

### 1.4 操作系统的功能

**内存管理**
**进程管理**
**设备管理**
**文件管理**
**提供用户接口**

#### 1.4.1 内存管理

内存管理的主要任务使为多道程序的运行提供良好的环境，方便用户使用内存，提高内存的利用率，以及从逻辑上扩充内存以实现虚拟存储。

内存管理的功能：
**内存分配**
**内存保护**
**地址映射**
**内存扩充**

-------------------------------

**内存分配**：
主要任务使为每道程序分配内存空间，使它们各得其所。
两种方式实现：静态分配方式和动态分配方式。
为了实现内存的分配，需要以下数据结构和功能支持：
用于内存分配数据结构
内存分配功能
内存回收功能

**内存保护**：
主要任务是：

1. 使操作系统内核的空间不会被用户随意访问，以保证系统的安全和稳定。
2. 确保每道用户程序都在自己的内存空间中运行，互不干扰。

**地址映射**
CPU执行程序过程中访问内存时，需要把程序的逻辑地址转变为物理地址，这个转换的过程称为地址映射。
地址映射应在硬件的支持下完成

**内存扩充**
借助于虚拟存储技术，从逻辑上扩充内存容量，使系统能够向用户提供比物理内存大的存储容量。

为了能从逻辑上扩充内存，系统必须具有内存扩充机制，以实现下列功能：
请求调入功能
置换功能

-------------------------------

#### 1.4.2 进程管理

进程管理功能主要包括进程的描述与组织、进程控制、进程同步、进程通信及进程调度。

-------------------------------

#### 1.4.3 设备管理

设备管理主要**完成用户的I/O请求，为用户分配I/O设备。**

设备管理应该具有以下功能：

**缓冲管理**.

**设备分配**.

**设备处理**.

**设备独立性和虚拟设备**.

-------------------------------

#### 1.4.4 文件管理

文件存储空间的管理
目录管理
文件的读、写管理和存取控制

-------------------------------

#### 1.4.5 提供用户接口

系统调用是操作系统实现的具有某种功能的程序模块，应用程序可以通过系统调用的接口使用操作系统实现的功能，获得操作系统内核的服务。

命令接口：分为联机用户接口、脱机用户接口

图形用户接口： 20世纪90年代，开始引入图形化用户接口

程序接口： 操作系统提供给程序员的接口是系统调用

-------------------------------

### 1.5 操作系统的体系结构

#### 1.5.1 软件体系结构简介

软件体系结构是一个复杂软件系统的高层结构，为软件系统提供了**一个结构、行为和属性的高级抽象**，包括**系统元素的结构、元素间的相互管理，以及指导元素集成的模式和约束**三个方面。

-------------------------------

#### 1.5.2 操作系统体系结构的分析

简单的监控程序模型

单体结构模型：单体内核是操作系统最早、最常见的体系结构。

层次结构模型：基本思想：将操作系统分解为多个小的、容易理解的层，系统功能被隔离在不同层中，每一次提供对系统功能的部分抽象，然后采用单项调用的顺序，形成一连串彼此连续的对系统功能的抽象串，最终形成对整个系统的完整抽象。

客户/服务器模型与微内核结构：
微内核技术是操作系统发展的一个里程碑。

微内核结构用一个水平分层的结构代替了传统的纵向分层的结构。

缺点是效率不高

两个发展方向：通用操作系统，嵌入式操作系统。

动态可扩展结构模型：

基本思想：在运行过程中，能够动态的实现系统行为扩展的结构，也可称之为弹性结构。

-------------------------------

### 1.6 指令的执行

程序是指令的集合，程序的执行就是按照某种控制流执行指令的过程。

指令周期：

    -   一个单一指令需要的处理称之为指令周期   
    -   一个指令周期划分为两个步骤：取指周期和执行周期
  
取指令和执行指令：

    -   在每个指令周期开始时，处理器从存储器中取一条指令
    -   取到的指令被放置在处理器的指令寄存器IR中。
    -   处理器解释指令并执行要求的动作，这些动作分为4类：
        · 处理器与存储器之间的指令或数据传送操作

        · 处理器与I/O设备之间的指令或数据传送操作

        · 算术运算操作或逻辑运算操作

        · 控制操作，即修改指令的执行顺序的操作

指令的执行小结：
    - 程序执行的过程是反复取指令和执行指令的过程。

    - 取指令和执行指令由硬件完成。